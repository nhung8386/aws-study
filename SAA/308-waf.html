<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="header.title">T·ªïng Quan T∆∞∆°ng T√°c v·ªÅ AWS WAF</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Tech Neutrals -->
    <!-- Application Structure Plan: The application is structured into four main thematic sections to guide the user from foundational knowledge to practical application and reinforcement, rather than a linear slide format. 1) 'Core Concepts': Uses interactive tabs for what WAF is, where it deploys (visual cards), and its rule types (interactive list + summary chart) to allow focused exploration. 2) 'Use Case': Presents the Fixed IP/ALB scenario with a step-by-step text explanation alongside a clear HTML/CSS flowchart for easy comprehension of the architecture. 3) 'Knowledge Check': An interactive quiz to reinforce key takeaways and increase user engagement. 4) 'Summary': A final list of key points. This structure promotes active learning and better information retention by breaking down complex topics into digestible, interactive chunks. -->
    <!-- Visualization & Content Choices: 1. Layer 7 vs 4: Goal(Compare) -> Viz(HTML/CSS diagram) -> Interaction(Static) -> Justification(Clear visual separation is faster to understand than text). 2. Deployment Targets: Goal(Organize) -> Viz(Interactive HTML cards) -> Interaction(Hover highlights) -> Justification(Engaging way to present a list and visually separate supported/unsupported services). 3. Rule Types: Goal(Organize/Inform) -> Viz(JS-powered vertical tabs and a Chart.js horizontal bar chart) -> Interaction(Click tabs to show details) -> Justification(Breaks down dense info; chart provides a high-level summary). 4. Architecture: Goal(Relationships) -> Viz(HTML/CSS flowchart) -> Interaction(Static diagram) -> Justification(Visually explains the flow of components, which is critical for architecture). 5. Quiz: Goal(Reinforce) -> Viz(Interactive HTML form) -> Interaction(Select answer, get feedback) -> Justification(Active recall improves learning). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        .section-title {
            color: #0f172a; /* slate-900 */
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .tab-button {
            transition: all 0.2s ease-in-out;
            border-left-width: 4px;
            border-color: transparent;
        }
        .tab-button.active {
            background-color: #e0f2fe; /* sky-100 */
            border-color: #0ea5e9; /* sky-500 */
            color: #0c4a6e; /* sky-800 */
            font-weight: 600;
        }
        .flow-arrow {
            position: relative;
        }
        .flow-arrow::after {
            content: '‚ñº';
            position: absolute;
            left: 50%;
            bottom: -20px;
            transform: translateX(-50%);
            color: #64748b; /* slate-500 */
            font-size: 1.5rem;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            background-color: #0ea5e9; /* sky-500 */
            color: white;
            font-weight: 600;
            text-align: center;
            transition: background-color 0.2s;
        }
        .btn:hover {
            background-color: #0284c7; /* sky-600 */
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-12 relative">
            <h1 class="text-4xl md:text-5xl font-bold section-title mb-2" data-i18n="header.title">T·ªïng Quan T∆∞∆°ng T√°c v·ªÅ AWS WAF</h1>
            <p class="text-lg text-slate-600" data-i18n="header.subtitle">Kh√°m ph√° T∆∞·ªùng l·ª≠a ·ª®ng d·ª•ng Web c·ªßa AWS m·ªôt c√°ch tr·ª±c quan</p>
            <div class="absolute top-0 right-0 mt-4 mr-4 flex space-x-2">
                <button id="lang-toggle-vi" class="px-3 py-1 rounded-md bg-sky-500 text-white font-semibold text-sm">VI</button>
                <button id="lang-toggle-en" class="px-3 py-1 rounded-md bg-slate-200 text-slate-700 font-semibold text-sm">EN</button>
            </div>
        </header>

        <main>
            <!-- Section 1: Core Concepts -->
            <section id="concepts" class="mb-16">
                <h2 class="text-3xl font-bold section-title mb-8 text-center" data-i18n="concepts.sectionTitle">C√°c Kh√°i Ni·ªám C·ªët L√µi</h2>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4 text-sky-700" data-i18n="concepts.wafWhatTitle">WAF l√† g√¨? B·∫£o v·ªá ·ªü L·ªõp 7</h3>
                        <p class="text-slate-600 mb-4" data-i18n="concepts.wafWhatText">AWS WAF (Web Application Firewall) b·∫£o v·ªá ·ª©ng d·ª•ng web c·ªßa b·∫°n kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng ph·ªï bi·∫øn ·ªü <strong>L·ªõp 7 (HTTP)</strong>. ƒêi·ªÅu n√†y cho ph√©p WAF ki·ªÉm tra v√† l·ªçc l∆∞u l∆∞·ª£ng truy c·∫≠p HTTP, kh√¥ng gi·ªëng nh∆∞ c√°c t∆∞·ªùng l·ª≠a kh√°c ho·∫°t ƒë·ªông ·ªü c√°c l·ªõp th·∫•p h∆°n.</p>
                        <div class="flex justify-around text-center mt-6">
                            <div class="p-4 bg-sky-50 border-2 border-sky-500 rounded-lg w-1/2 mr-2">
                                <p class="font-bold text-sky-800" data-i18n="concepts.layer7Title">L·ªõp 7 (Application)</p>
                                <p class="text-sm text-sky-600" data-i18n="concepts.layer7Protocol">HTTP/HTTPS</p>
                                <p class="mt-2 text-2xl">üõ°Ô∏è</p>
                                <p class="mt-1 font-semibold text-slate-700" data-i18n="concepts.layer7Component">AWS WAF</p>
                            </div>
                            <div class="p-4 bg-slate-50 border-2 border-slate-300 rounded-lg w-1/2 ml-2">
                                <p class="font-bold text-slate-800" data-i18n="concepts.layer4Title">L·ªõp 4 (Transport)</p>
                                <p class="text-sm text-slate-600" data-i18n="concepts.layer4Protocol">TCP/UDP</p>
                                <p class="mt-2 text-2xl">‚öôÔ∏è</p>
                                <p class="mt-1 font-semibold text-slate-700" data-i18n="concepts.layer4Component">Network Load Balancer</p>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4 text-sky-700" data-i18n="concepts.deploymentTitle">Tri·ªÉn khai WAF ·ªü ƒë√¢u?</h3>
                        <p class="text-slate-600 mb-4" data-i18n="concepts.deploymentText">WAF c√≥ th·ªÉ ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• AWS c·ª• th·ªÉ. Vi·ªác bi·∫øt c√°c m·ª•c ti√™u n√†y l√† r·∫•t quan tr·ªçng.</p>
                        <p class="font-semibold mb-2 text-slate-700" data-i18n="concepts.supportedServices">D·ªãch v·ª• h·ªó tr·ª£:</p>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-center">
                            <div class="p-2 bg-green-100 text-green-800 rounded-md text-sm" data-i18n="concepts.alb">Application Load Balancer</div>
                            <div class="p-2 bg-green-100 text-green-800 rounded-md text-sm" data-i18n="concepts.apiGateway">API Gateway</div>
                            <div class="p-2 bg-green-100 text-green-800 rounded-md text-sm" data-i18n="concepts.cloudFront">CloudFront</div>
                            <div class="p-2 bg-green-100 text-green-800 rounded-md text-sm" data-i18n="concepts.appSync">AppSync GraphQL</div>
                            <div class="p-2 bg-green-100 text-green-800 rounded-md text-sm" data-i18n="concepts.cognito">Cognito User Pool</div>
                            <div class="p-2 bg-red-100 text-red-800 rounded-md text-sm font-semibold" data-i18n="concepts.nlbUnsupported">‚ùå Network Load Balancer</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Rules -->
            <section id="rules" class="mb-16">
                <h2 class="text-3xl font-bold section-title mb-8 text-center" data-i18n="rules.sectionTitle">Web ACLs & C√°c Lo·∫°i Quy T·∫Øc</h2>
                <p class="text-center text-slate-600 max-w-3xl mx-auto mb-8" data-i18n="rules.introText">Web Access Control Lists (Web ACLs) l√† t·∫≠p h·ª£p c√°c quy t·∫Øc b·∫°n √°p d·ª•ng ƒë·ªÉ b·∫£o v·ªá t√†i nguy√™n AWS c·ªßa m√¨nh. Kh√°m ph√° c√°c lo·∫°i quy t·∫Øc kh√°c nhau b·∫°n c√≥ th·ªÉ ƒë·ªãnh c·∫•u h√¨nh.</p>
                
                <div class="card p-6">
                    <div class="flex flex-col md:flex-row gap-8">
                        <!-- Rule Tabs -->
                        <div class="w-full md:w-1/3">
                            <h3 class="font-bold mb-4 text-lg text-slate-700" data-i18n="rules.selectRuleType">Ch·ªçn lo·∫°i quy t·∫Øc:</h3>
                            <div id="rule-tabs" class="space-y-1">
                                <button data-target="ip-set" class="tab-button w-full text-left p-3 active" data-i18n="rules.ipSetTab">L·ªçc theo IP (IP Sets)</button>
                                <button data-target="http" class="tab-button w-full text-left p-3" data-i18n="rules.httpTab">L·ªçc theo HTTP</button>
                                <button data-target="attacks" class="tab-button w-full text-left p-3" data-i18n="rules.attacksTab">Ch·ªëng t·∫•n c√¥ng ph·ªï bi·∫øn</button>
                                <button data-target="geo" class="tab-button w-full text-left p-3" data-i18n="rules.geoTab">L·ªçc theo v·ªã tr√≠ (Geo Match)</button>
                                <button data-target="rate" class="tab-button w-full text-left p-3" data-i18n="rules.rateTab">Ch·ªëng DDoS (Rate-based)</button>
                                <button data-target="scope" class="tab-button w-full text-left p-3" data-i18n="rules.scopeTab">Ph·∫°m vi (Regional/Global)</button>
                            </div>
                            <div class="mt-8">
                                <h3 class="font-bold mb-4 text-lg text-slate-700" data-i18n="rules.chart.title">Ph√¢n lo·∫°i Quy t·∫Øc WAF</h3>
                                <div class="chart-container">
                                    <canvas id="ruleChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Rule Content -->
                        <div class="w-full md:w-2/3 bg-slate-50 p-6 rounded-lg">
                            <div id="rule-content">
                                <div id="ip-set-content" class="rule-pane">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.ipSetContentTitle">L·ªçc theo T·∫≠p h·ª£p IP (IP Sets)</h4>
                                    <p class="text-slate-600" data-i18n="rules.ipSetContentText">Cho ph√©p ho·∫∑c ch·∫∑n c√°c y√™u c·∫ßu d·ª±a tr√™n ƒë·ªãa ch·ªâ IP ngu·ªìn. R·∫•t h·ªØu √≠ch ƒë·ªÉ ch·∫∑n l∆∞u l∆∞·ª£ng truy c·∫≠p ƒë·ªôc h·∫°i ƒë√£ bi·∫øt ho·∫∑c ch·ªâ cho ph√©p truy c·∫≠p t·ª´ c√°c ƒë·ªãa ch·ªâ IP c·ª• th·ªÉ.</p>
                                    <div class="mt-4 p-4 bg-sky-100 text-sky-800 rounded-lg" data-i18n="rules.ipSetContentNote">M·ªói IP set c√≥ th·ªÉ ch·ª©a t·ªõi <strong>10.000 ƒë·ªãa ch·ªâ IP</strong> ho·∫∑c d·∫£i IP. B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng nhi·ªÅu quy t·∫Øc n·∫øu c·∫ßn nhi·ªÅu h∆°n.</div>
                                </div>
                                <div id="http-content" class="rule-pane hidden">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.httpContentTitle">L·ªçc theo Ti√™u ƒë·ªÅ & N·ªôi dung HTTP</h4>
                                    <p class="text-slate-600" data-i18n="rules.httpContentText">Ki·ªÉm tra c√°c ph·∫ßn kh√°c nhau c·ªßa y√™u c·∫ßu web, ch·∫≥ng h·∫°n nh∆∞ ti√™u ƒë·ªÅ (v√≠ d·ª•: User-Agent, Referer), ph∆∞∆°ng th·ª©c HTTP (GET, POST), ho·∫∑c n·ªôi dung c·ªßa y√™u c·∫ßu (body) ƒë·ªÉ t√¨m c√°c m·∫´u c·ª• th·ªÉ.</p>
                                </div>
                                <div id="attacks-content" class="rule-pane hidden">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.attacksContentTitle">B·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng ph·ªï bi·∫øn</h4>
                                    <p class="text-slate-600" data-i18n="rules.attacksContentText">S·ª≠ d·ª•ng c√°c quy t·∫Øc ƒë·ªÉ kh·ªõp c√°c chu·ªói URI ƒë·ªôc h·∫°i nh·∫±m ngƒÉn ch·∫∑n c√°c cu·ªôc t·∫•n c√¥ng nh∆∞:</p>
                                    <ul class="list-disc list-inside mt-2 text-slate-600">
                                        <li data-i18n="rules.sqlInjection"><strong>SQL Injection (SQLi):</strong> NgƒÉn ch·∫∑n c√°c n·ªó l·ª±c ch√®n m√£ SQL ƒë·ªôc h·∫°i.</li>
                                        <li data-i18n="rules.xss"><strong>Cross-Site Scripting (XSS):</strong> NgƒÉn ch·∫∑n vi·ªác ch√®n c√°c t·∫≠p l·ªánh ƒë·ªôc h·∫°i v√†o c√°c trang web.</li>
                                    </ul>
                                </div>
                                <div id="geo-content" class="rule-pane hidden">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.geoContentTitle">ƒê·ªëi s√°nh ƒë·ªãa l√Ω (Geo Match)</h4>
                                    <p class="text-slate-600" data-i18n="rules.geoContentText">Cho ph√©p ho·∫∑c ch·∫∑n l∆∞u l∆∞·ª£ng truy c·∫≠p t·ª´ c√°c qu·ªëc gia c·ª• th·ªÉ. H·ªØu √≠ch cho vi·ªác tu√¢n th·ªß c√°c quy ƒë·ªãnh v·ªÅ d·ªØ li·ªáu ho·∫∑c h·∫°n ch·∫ø truy c·∫≠p ƒë·∫øn c√°c khu v·ª±c ƒë·ªãa l√Ω m·ª•c ti√™u c·ªßa b·∫°n.</p>
                                </div>
                                <div id="rate-content" class="rule-pane hidden">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.rateContentTitle">Quy t·∫Øc d·ª±a tr√™n t·ª∑ l·ªá (Rate-based)</h4>
                                    <p class="text-slate-600" data-i18n="rules.rateContentText">B·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS v√† web scraping b·∫±ng c√°ch theo d√µi s·ªë l∆∞·ª£ng y√™u c·∫ßu t·ª´ m·ªôt ƒë·ªãa ch·ªâ IP duy nh·∫•t trong m·ªôt kho·∫£ng th·ªùi gian 5 ph√∫t. N·∫øu s·ªë l∆∞·ª£ng y√™u c·∫ßu v∆∞·ª£t qu√° ng∆∞·ª°ng b·∫°n ƒë·∫∑t, quy t·∫Øc s·∫Ω k√≠ch ho·∫°t m·ªôt h√†nh ƒë·ªông (v√≠ d·ª•: ch·∫∑n).</p>
                                    <div class="mt-4 p-4 bg-sky-100 text-sky-800 rounded-lg" data-i18n="rules.rateContentNote">V√≠ d·ª•: Ch·∫∑n m·ªôt IP n·∫øu n√≥ g·ª≠i nhi·ªÅu h∆°n <strong>2.000 y√™u c·∫ßu</strong> trong 5 ph√∫t.</div>
                                </div>
                                 <div id="scope-content" class="rule-pane hidden">
                                    <h4 class="text-xl font-bold text-sky-700 mb-2" data-i18n="rules.scopeContentTitle">Ph·∫°m vi c·ªßa Web ACL</h4>
                                    <p class="text-slate-600" data-i18n="rules.scopeContentText">Web ACLs ƒë∆∞·ª£c t·∫°o cho m·ªôt khu v·ª±c AWS c·ª• th·ªÉ v√† c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng v·ªõi b·∫•t k·ª≥ t√†i nguy√™n ƒë∆∞·ª£c h·ªó tr·ª£ n√†o trong khu v·ª±c ƒë√≥.</p>
                                     <div class="mt-4 p-4 bg-yellow-100 text-yellow-800 rounded-lg" data-i18n="rules.scopeContentNote"><strong>Ngo·∫°i l·ªá:</strong> Khi s·ª≠ d·ª•ng v·ªõi <strong>Amazon CloudFront</strong>, Web ACL ph·∫£i ƒë∆∞·ª£c t·∫°o ·ªü khu v·ª±c <strong>US East (N. Virginia)</strong>, nh∆∞ng n√≥ s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai to√†n c·∫ßu ƒë·∫øn t·∫•t c·∫£ c√°c Edge Location c·ªßa CloudFront.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Use Case -->
            <section id="use-case" class="mb-16">
                <h2 class="text-3xl font-bold section-title mb-2 text-center" data-i18n="useCase.sectionTitle">Tr∆∞·ªùng H·ª£p S·ª≠ D·ª•ng ƒêi·ªÉn H√¨nh</h2>
                <p class="text-center text-slate-600 max-w-3xl mx-auto mb-8" data-i18n="useCase.introText">L√†m th·∫ø n√†o ƒë·ªÉ c√≥ m·ªôt ƒë·ªãa ch·ªâ IP tƒ©nh cho ·ª©ng d·ª•ng c·ªßa b·∫°n trong khi v·∫´n ƒë∆∞·ª£c b·∫£o v·ªá b·ªüi WAF tr√™n Application Load Balancer?</p>

                <div class="card p-8">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-2xl font-bold text-sky-700 mb-4" data-i18n="useCase.problemTitle">V·∫•n ƒë·ªÅ: ALB kh√¥ng c√≥ IP tƒ©nh</h3>
                            <p class="text-slate-600 mb-2" data-i18n="useCase.problemText1">Application Load Balancers (ALB) cung c·∫•p m·ªôt DNS name, nh∆∞ng ƒë·ªãa ch·ªâ IP c∆° b·∫£n c·ªßa ch√∫ng c√≥ th·ªÉ thay ƒë·ªïi. ƒêi·ªÅu n√†y g√¢y kh√≥ khƒÉn n·∫øu b·∫°n c·∫ßn m·ªôt ƒë·ªãa ch·ªâ IP tƒ©nh ƒë√°ng tin c·∫≠y.</p>
                            <p class="text-slate-600 mb-4" data-i18n="useCase.problemText2">ƒê·ªìng th·ªùi, b·∫°n kh√¥ng th·ªÉ ƒë·∫∑t WAF tr√™n Network Load Balancer (ho·∫°t ƒë·ªông ·ªü L·ªõp 4) ƒë·ªÉ c√≥ IP tƒ©nh.</p>
                            
                            <h3 class="text-2xl font-bold text-green-700 mb-4 mt-6" data-i18n="useCase.solutionTitle">Gi·∫£i ph√°p: AWS Global Accelerator</h3>
                             <p class="text-slate-600" data-i18n="useCase.solutionText">B·∫±ng c√°ch ƒë·∫∑t AWS Global Accelerator ·ªü ph√≠a tr∆∞·ªõc Application Load Balancer, b·∫°n c√≥ th·ªÉ nh·∫≠n ƒë∆∞·ª£c hai ƒë·ªãa ch·ªâ IP tƒ©nh. Global Accelerator s·∫Ω ƒë·ªãnh tuy·∫øn l∆∞u l∆∞·ª£ng truy c·∫≠p ƒë·∫øn ALB c·ªßa b·∫°n, n∆°i AWS WAF c√≥ th·ªÉ ki·ªÉm tra v√† b·∫£o v·ªá ·ª©ng d·ª•ng c·ªßa b·∫°n.</p>
                        </div>
                        <div class="text-center">
                             <h4 class="font-bold mb-4 text-slate-700" data-i18n="useCase.architectureDiagramTitle">S∆° ƒë·ªì ki·∫øn tr√∫c gi·∫£i ph√°p</h4>
                             <div class="space-y-8">
                                <div class="p-4 bg-slate-200 rounded-lg card flow-arrow">
                                    <p class="font-bold" data-i18n="useCase.user">Ng∆∞·ªùi d√πng</p>
                                    <p class="text-sm text-slate-600" data-i18n="useCase.userDetail">Truy c·∫≠p qua IP tƒ©nh</p>
                                </div>
                                 <div class="p-4 bg-blue-200 rounded-lg card flow-arrow">
                                    <p class="font-bold" data-i18n="useCase.globalAccelerator">AWS Global Accelerator</p>
                                    <p class="text-sm text-blue-600" data-i18n="useCase.globalAcceleratorDetail">Cung c·∫•p 2 IP tƒ©nh</p>
                                </div>
                                <div class="p-4 bg-sky-200 rounded-lg card flow-arrow">
                                    <p class="font-bold" data-i18n="useCase.albDiagram">Application Load Balancer</p>
                                    <p class="text-sm text-sky-600" data-i18n="useCase.albDiagramDetail">G·∫Øn k√®m WAF ƒë·ªÉ b·∫£o v·ªá</p>
                                </div>
                                <div class="p-4 bg-green-200 rounded-lg card">
                                    <p class="font-bold" data-i18n="useCase.ec2Instances">EC2 Instances</p>
                                    <p class="text-sm text-green-600" data-i18n="useCase.ec2InstancesDetail">·ª®ng d·ª•ng c·ªßa b·∫°n</p>
                                </div>
                             </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section 4: Key Takeaways -->
            <section id="summary" class="mb-16">
                 <h2 class="text-3xl font-bold section-title mb-8 text-center" data-i18n="summary.sectionTitle">ƒêi·ªÉm Ch√≠nh C·∫ßn Ghi Nh·ªõ</h2>
                 <div class="max-w-3xl mx-auto space-y-4">
                    <div class="card p-4 flex items-start space-x-4">
                        <div class="text-2xl pt-1">1Ô∏è‚É£</div>
                        <p class="text-slate-700" data-i18n="summary.point1">AWS WAF b·∫£o v·ªá c√°c ·ª©ng d·ª•ng web ·ªü <strong>L·ªõp 7 (HTTP)</strong> ch·ªëng l·∫°i c√°c cu·ªôc t·∫•n c√¥ng web ph·ªï bi·∫øn.</p>
                    </div>
                    <div class="card p-4 flex items-start space-x-4">
                        <div class="text-2xl pt-1">2Ô∏è‚É£</div>
                        <p class="text-slate-700" data-i18n="summary.point2">WAF c√≥ th·ªÉ ƒë∆∞·ª£c tri·ªÉn khai tr√™n <strong>ALB, API Gateway, CloudFront, AppSync, v√† Cognito</strong>, nh∆∞ng <span class="font-bold text-red-600">kh√¥ng</span> th·ªÉ tr√™n Network Load Balancer.</p>
                    </div>
                    <div class="card p-4 flex items-start space-x-4">
                        <div class="text-2xl pt-1">3Ô∏è‚É£</div>
                        <p class="text-slate-700" data-i18n="summary.point3">Web ACLs cho ph√©p l·ªçc theo nhi·ªÅu ti√™u ch√≠: <strong>IP sets, HTTP headers/body, URI, k√≠ch th∆∞·ªõc, v·ªã tr√≠ ƒë·ªãa l√Ω, v√† t·ª∑ l·ªá y√™u c·∫ßu</strong>.</p>
                    </div>
                    <div class="card p-4 flex items-start space-x-4">
                        <div class="text-2xl pt-1">4Ô∏è‚É£</div>
                        <p class="text-slate-700" data-i18n="summary.point4">ƒê·ªÉ c√≥ IP tƒ©nh v·ªõi WAF tr√™n ALB, h√£y s·ª≠ d·ª•ng <strong>AWS Global Accelerator</strong> ·ªü ph√≠a tr∆∞·ªõc ALB.</p>
                    </div>
                 </div>
            </section>

        </main>
    </div>

    <script>
        const translations = {
            vi: {
                header: {
                    title: "T·ªïng Quan T∆∞∆°ng T√°c v·ªÅ AWS WAF",
                    subtitle: "Kh√°m ph√° T∆∞·ªùng l·ª≠a ·ª®ng d·ª•ng Web c·ªßa AWS m·ªôt c√°ch tr·ª±c quan"
                },
                concepts: {
                    sectionTitle: "C√°c Kh√°i Ni·ªám C·ªët L√µi",
                    wafWhatTitle: "WAF l√† g√¨? B·∫£o v·ªá ·ªü L·ªõp 7",
                    wafWhatText: "AWS WAF (Web Application Firewall) b·∫£o v·ªá ·ª©ng d·ª•ng web c·ªßa b·∫°n kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng ph·ªï bi·∫øn ·ªü <strong>L·ªõp 7 (HTTP)</strong>. ƒêi·ªÅu n√†y cho ph√©p WAF ki·ªÉm tra v√† l·ªçc l∆∞u l∆∞·ª£ng truy c·∫≠p HTTP, kh√¥ng gi·ªëng nh∆∞ c√°c t∆∞·ªùng l·ª≠a kh√°c ho·∫°t ƒë·ªông ·ªü c√°c l·ªõp th·∫•p h∆°n.",
                    layer7Title: "L·ªõp 7 (Application)",
                    layer7Protocol: "HTTP/HTTPS",
                    layer7Component: "AWS WAF",
                    layer4Title: "L·ªõp 4 (Transport)",
                    layer4Protocol: "TCP/UDP",
                    layer4Component: "Network Load Balancer",
                    deploymentTitle: "Tri·ªÉn khai WAF ·ªü ƒë√¢u?",
                    deploymentText: "WAF c√≥ th·ªÉ ƒë∆∞·ª£c t√≠ch h·ª£p v·ªõi c√°c d·ªãch v·ª• AWS c·ª• th·ªÉ. Vi·ªác bi·∫øt c√°c m·ª•c ti√™u n√†y l√† r·∫•t quan tr·ªçng.",
                    supportedServices: "D·ªãch v·ª• h·ªó tr·ª£:",
                    alb: "Application Load Balancer",
                    apiGateway: "API Gateway",
                    cloudFront: "CloudFront",
                    appSync: "AppSync GraphQL",
                    cognito: "Cognito User Pool",
                    nlbUnsupported: "‚ùå Network Load Balancer"
                },
                rules: {
                    sectionTitle: "Web ACLs & C√°c Lo·∫°i Quy T·∫Øc",
                    introText: "Web Access Control Lists (Web ACLs) l√† t·∫≠p h·ª£p c√°c quy t·∫Øc b·∫°n √°p d·ª•ng ƒë·ªÉ b·∫£o v·ªá t√†i nguy√™n AWS c·ªßa m√¨nh. Kh√°m ph√° c√°c lo·∫°i quy t·∫Øc kh√°c nhau b·∫°n c√≥ th·ªÉ ƒë·ªãnh c·∫•u h√¨nh.",
                    selectRuleType: "Ch·ªçn lo·∫°i quy t·∫Øc:",
                    ipSetTab: "L·ªçc theo IP (IP Sets)",
                    httpTab: "L·ªçc theo HTTP",
                    attacksTab: "Ch·ªëng t·∫•n c√¥ng ph·ªï bi·∫øn",
                    geoTab: "L·ªçc theo v·ªã tr√≠ (Geo Match)",
                    rateTab: "Ch·ªëng DDoS (Rate-based)",
                    scopeTab: "Ph·∫°m vi (Regional/Global)",
                    ipSetContentTitle: "L·ªçc theo T·∫≠p h·ª£p IP (IP Sets)",
                    ipSetContentText: "Cho ph√©p ho·∫∑c ch·∫∑n c√°c y√™u c·∫ßu d·ª±a tr√™n ƒë·ªãa ch·ªâ IP ngu·ªìn. R·∫•t h·ªØu √≠ch ƒë·ªÉ ch·∫∑n l∆∞u l∆∞·ª£ng truy c·∫≠p ƒë·ªôc h·∫°i ƒë√£ bi·∫øt ho·∫∑c ch·ªâ cho ph√©p truy c·∫≠p t·ª´ c√°c ƒë·ªãa ch·ªâ IP c·ª• th·ªÉ.",
                    ipSetContentNote: "M·ªói IP set c√≥ th·ªÉ ch·ª©a t·ªõi <strong>10.000 ƒë·ªãa ch·ªâ IP</strong> ho·∫∑c d·∫£i IP. B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng nhi·ªÅu quy t·∫Øc n·∫øu c·∫ßn nhi·ªÅu h∆°n.",
                    httpContentTitle: "L·ªçc theo Ti√™u ƒë·ªÅ & N·ªôi dung HTTP",
                    httpContentText: "Ki·ªÉm tra c√°c ph·∫ßn kh√°c nhau c·ªßa y√™u c·∫ßu web, ch·∫≥ng h·∫°n nh∆∞ ti√™u ƒë·ªÅ (v√≠ d·ª•: User-Agent, Referer), ph∆∞∆°ng th·ª©c HTTP (GET, POST), ho·∫∑c n·ªôi dung c·ªßa y√™u c·∫ßu (body) ƒë·ªÉ t√¨m c√°c m·∫´u c·ª• th·ªÉ.",
                    attacksContentTitle: "B·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng ph·ªï bi·∫øn",
                    attacksContentText: "S·ª≠ d·ª•ng c√°c quy t·∫Øc ƒë·ªÉ kh·ªõp c√°c chu·ªói URI ƒë·ªôc h·∫°i nh·∫±m ngƒÉn ch·∫∑n c√°c cu·ªôc t·∫•n c√¥ng nh∆∞:",
                    sqlInjection: "<strong>SQL Injection (SQLi):</strong> NgƒÉn ch·∫∑n c√°c n·ªó l·ª±c ch√®n m√£ SQL ƒë·ªôc h·∫°i.",
                    xss: "<strong>Cross-Site Scripting (XSS):</strong> NgƒÉn ch·∫∑n vi·ªác ch√®n c√°c t·∫≠p l·ªánh ƒë·ªôc h·∫°i v√†o c√°c trang web.",
                    geoContentTitle: "ƒê·ªëi s√°nh ƒë·ªãa l√Ω (Geo Match)",
                    geoContentText: "Cho ph√©p ho·∫∑c ch·∫∑n l∆∞u l∆∞·ª£ng truy c·∫≠p t·ª´ c√°c qu·ªëc gia c·ª• th·ªÉ. H·ªØu √≠ch cho vi·ªác tu√¢n th·ªß c√°c quy ƒë·ªãnh v·ªÅ d·ªØ li·ªáu ho·∫∑c h·∫°n ch·∫ø truy c·∫≠p ƒë·∫øn c√°c khu v·ª±c ƒë·ªãa l√Ω m·ª•c ti√™u c·ªßa b·∫°n.",
                    rateContentTitle: "Quy t·∫Øc d·ª±a tr√™n t·ª∑ l·ªá (Rate-based)",
                    rateContentText: "B·∫£o v·ªá kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng DDoS v√† web scraping b·∫±ng c√°ch theo d√µi s·ªë l∆∞·ª£ng y√™u c·∫ßu t·ª´ m·ªôt ƒë·ªãa ch·ªâ IP duy nh·∫•t trong m·ªôt kho·∫£ng th·ªùi gian 5 ph√∫t. N·∫øu s·ªë l∆∞·ª£ng y√™u c·∫ßu v∆∞·ª£t qu√° ng∆∞·ª°ng b·∫°n ƒë·∫∑t, quy t·∫Øc s·∫Ω k√≠ch ho·∫°t m·ªôt h√†nh ƒë·ªông (v√≠ d·ª•: ch·∫∑n).",
                    rateContentNote: "V√≠ d·ª•: Ch·∫∑n m·ªôt IP n·∫øu n√≥ g·ª≠i nhi·ªÅu h∆°n <strong>2.000 y√™u c·∫ßu</strong> trong 5 ph√∫t.",
                    scopeContentTitle: "Ph·∫°m vi c·ªßa Web ACL",
                    scopeContentText: "Web ACLs ƒë∆∞·ª£c t·∫°o cho m·ªôt khu v·ª±c AWS c·ª• th·ªÉ v√† c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng v·ªõi b·∫•t k·ª≥ t√†i nguy√™n ƒë∆∞·ª£c h·ªó tr·ª£ n√†o trong khu v·ª±c ƒë√≥.",
                    scopeContentNote: "<strong>Ngo·∫°i l·ªá:</strong> Khi s·ª≠ d·ª•ng v·ªõi <strong>Amazon CloudFront</strong>, Web ACL ph·∫£i ƒë∆∞·ª£c t·∫°o ·ªü khu v·ª±c <strong>US East (N. Virginia)</strong>, nh∆∞ng n√≥ s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai to√†n c·∫ßu ƒë·∫øn t·∫•t c·∫£ c√°c Edge Location c·ªßa CloudFront.",
                    chart: {
                        labels: ["T·∫≠p h·ª£p IP", "HTTP/Body/URI", "B·∫£o v·ªá T·∫•n c√¥ng", "ƒê·ªëi s√°nh V·ªã tr√≠", "D·ª±a tr√™n T·ª∑ l·ªá", "Ph·∫°m vi"],
                        title: "Ph√¢n lo·∫°i Quy t·∫Øc WAF"
                    }
                },
                useCase: {
                    sectionTitle: "Tr∆∞·ªùng H·ª£p S·ª≠ D·ª•ng ƒêi·ªÉn H√¨nh",
                    introText: "L√†m th·∫ø n√†o ƒë·ªÉ c√≥ m·ªôt ƒë·ªãa ch·ªâ IP tƒ©nh cho ·ª©ng d·ª•ng c·ªßa b·∫°n trong khi v·∫´n ƒë∆∞·ª£c b·∫£o v·ªá b·ªüi WAF tr√™n Application Load Balancer?",
                    problemTitle: "V·∫•n ƒë·ªÅ: ALB kh√¥ng c√≥ IP tƒ©nh",
                    problemText1: "Application Load Balancers (ALB) cung c·∫•p m·ªôt DNS name, nh∆∞ng ƒë·ªãa ch·ªâ IP c∆° b·∫£n c·ªßa ch√∫ng c√≥ th·ªÉ thay ƒë·ªïi. ƒêi·ªÅu n√†y g√¢y kh√≥ khƒÉn n·∫øu b·∫°n c·∫ßn m·ªôt ƒë·ªãa ch·ªâ IP tƒ©nh ƒë√°ng tin c·∫≠y.",
                    problemText2: "ƒê·ªìng th·ªùi, b·∫°n kh√¥ng th·ªÉ ƒë·∫∑t WAF tr√™n Network Load Balancer (ho·∫°t ƒë·ªông ·ªü L·ªõp 4) ƒë·ªÉ c√≥ IP tƒ©nh.",
                    solutionTitle: "Gi·∫£i ph√°p: AWS Global Accelerator",
                    solutionText: "B·∫±ng c√°ch ƒë·∫∑t AWS Global Accelerator ·ªü ph√≠a tr∆∞·ªõc Application Load Balancer, b·∫°n c√≥ th·ªÉ nh·∫≠n ƒë∆∞·ª£c hai ƒë·ªãa ch·ªâ IP tƒ©nh. Global Accelerator s·∫Ω ƒë·ªãnh tuy·∫øn l∆∞u l∆∞·ª£ng truy c·∫≠p ƒë·∫øn ALB c·ªßa b·∫°n, n∆°i AWS WAF c√≥ th·ªÉ ki·ªÉm tra v√† b·∫£o v·ªá ·ª©ng d·ª•ng c·ªßa b·∫°n.",
                    architectureDiagramTitle: "S∆° ƒë·ªì ki·∫øn tr√∫c gi·∫£i ph√°p",
                    user: "Ng∆∞·ªùi d√πng",
                    userDetail: "Truy c·∫≠p qua IP tƒ©nh",
                    globalAccelerator: "AWS Global Accelerator",
                    globalAcceleratorDetail: "Cung c·∫•p 2 IP tƒ©nh",
                    albDiagram: "Application Load Balancer",
                    albDiagramDetail: "G·∫Øn k√®m WAF ƒë·ªÉ b·∫£o v·ªá",
                    ec2Instances: "EC2 Instances",
                    ec2InstancesDetail: "·ª®ng d·ª•ng c·ªßa b·∫°n"
                },
                summary: {
                    sectionTitle: "ƒêi·ªÉm Ch√≠nh C·∫ßn Ghi Nh·ªõ",
                    point1: "AWS WAF b·∫£o v·ªá c√°c ·ª©ng d·ª•ng web ·ªü <strong>L·ªõp 7 (HTTP)</strong> ch·ªëng l·∫°i c√°c cu·ªôc t·∫•n c√¥ng web ph·ªï bi·∫øn.",
                    point2: "WAF c√≥ th·ªÉ ƒë∆∞·ª£c tri·ªÉn khai tr√™n <strong>ALB, API Gateway, CloudFront, AppSync, v√† Cognito</strong>, nh∆∞ng <span class=\"font-bold text-red-600\">kh√¥ng</span> th·ªÉ tr√™n Network Load Balancer.",
                    point3: "Web ACLs cho ph√©p l·ªçc theo nhi·ªÅu ti√™u ch√≠: <strong>IP sets, HTTP headers/body, URI, k√≠ch th∆∞·ªõc, v·ªã tr√≠ ƒë·ªãa l√Ω, v√† t·ª∑ l·ªá y√™u c·∫ßu</strong>.",
                    point4: "ƒê·ªÉ c√≥ IP tƒ©nh v·ªõi WAF tr√™n ALB, h√£y s·ª≠ d·ª•ng <strong>AWS Global Accelerator</strong> ·ªü ph√≠a tr∆∞·ªõc ALB."
                }
            },
            en: {
                header: {
                    title: "Interactive Overview of AWS WAF",
                    subtitle: "Explore AWS Web Application Firewall Visually"
                },
                concepts: {
                    sectionTitle: "Core Concepts",
                    wafWhatTitle: "What is WAF? Layer 7 Protection",
                    wafWhatText: "AWS WAF (Web Application Firewall) protects your web application from common web exploits at <strong>Layer 7 (HTTP)</strong>. This allows WAF to inspect and filter HTTP traffic, unlike other firewalls operating at lower layers.",
                    layer7Title: "Layer 7 (Application)",
                    layer7Protocol: "HTTP/HTTPS",
                    layer7Component: "AWS WAF",
                    layer4Title: "Layer 4 (Transport)",
                    layer4Protocol: "TCP/UDP",
                    layer4Component: "Network Load Balancer",
                    deploymentTitle: "Where to Deploy WAF?",
                    deploymentText: "WAF can be integrated with specific AWS services. Knowing these targets is crucial.",
                    supportedServices: "Supported Services:",
                    alb: "Application Load Balancer",
                    apiGateway: "API Gateway",
                    cloudFront: "CloudFront",
                    appSync: "AppSync GraphQL",
                    cognito: "Cognito User Pool",
                    nlbUnsupported: "‚ùå Network Load Balancer"
                },
                rules: {
                    sectionTitle: "Web ACLs & Rule Types",
                    introText: "Web Access Control Lists (Web ACLs) are collections of rules you apply to protect your AWS resources. Explore the different types of rules you can configure.",
                    selectRuleType: "Select rule type:",
                    ipSetTab: "IP Filtering (IP Sets)",
                    httpTab: "HTTP Filtering",
                    attacksTab: "Common Attack Protection",
                    geoTab: "Geo Match Filtering",
                    rateTab: "DDoS Protection (Rate-based)",
                    scopeTab: "Scope (Regional/Global)",
                    ipSetContentTitle: "IP Set Filtering",
                    ipSetContentText: "Allows or blocks requests based on source IP addresses. Useful for blocking known malicious traffic or only allowing access from specific IP addresses.",
                    ipSetContentNote: "Each IP set can contain up to <strong>10,000 IP addresses</strong> or IP ranges. You can use multiple rules if you need more.",
                    httpContentTitle: "HTTP Header & Body Filtering",
                    httpContentText: "Inspects different parts of the web request, such as headers (e.g., User-Agent, Referer), HTTP methods (GET, POST), or the request body for specific patterns.",
                    attacksContentTitle: "Protection from Common Attacks",
                    attacksContentText: "Uses rules to match malicious URI strings to prevent attacks such as:",
                    sqlInjection: "<strong>SQL Injection (SQLi):</strong> Prevents attempts to inject malicious SQL code.",
                    xss: "<strong>Cross-Site Scripting (XSS):</strong> Prevents the injection of malicious scripts into web pages.",
                    geoContentTitle: "Geo Match",
                    geoContentText: "Allows or blocks traffic from specific countries. Useful for data compliance or restricting access to your target geographical regions.",
                    rateContentTitle: "Rate-based Rules",
                    rateContentText: "Protects against DDoS attacks and web scraping by counting the number of requests from a single IP address within a 5-minute period. If the request count exceeds your set threshold, the rule triggers an action (e.g., block).",
                    rateContentNote: "Example: Block an IP if it sends more than <strong>2,000 requests</strong> in 5 minutes.",
                    scopeContentTitle: "Web ACL Scope",
                    scopeContentText: "Web ACLs are created for a specific AWS region and can be used with any supported resource in that region.",
                    scopeContentNote: "<strong>Exception:</strong> When used with <strong>Amazon CloudFront</strong>, the Web ACL must be created in the <strong>US East (N. Virginia)</strong> region, but it will be deployed globally to all CloudFront Edge Locations.",
                    chart: {
                        labels: ["IP Sets", "HTTP/Body/URI", "Attack Protection", "Geo Match", "Rate-based", "Scope"],
                        title: "WAF Rule Categories"
                    }
                },
                useCase: {
                    sectionTitle: "Typical Use Case",
                    introText: "How to get a fixed IP address for your application while still being protected by WAF on an Application Load Balancer?",
                    problemTitle: "Problem: ALB does not have Fixed IPs",
                    problemText1: "Application Load Balancers (ALBs) provide a DNS name, but their underlying IP addresses can change. This makes it challenging if you need a reliable static IP address.",
                    problemText2: "Additionally, you cannot place WAF on a Network Load Balancer (which operates at Layer 4) to get a static IP.",
                    solutionTitle: "Solution: AWS Global Accelerator",
                    solutionText: "By placing AWS Global Accelerator in front of your Application Load Balancer, you can obtain two static IP addresses. Global Accelerator will route traffic to your ALB, where AWS WAF can inspect and protect your application.",
                    architectureDiagramTitle: "Solution Architecture Diagram",
                    user: "User",
                    userDetail: "Accesses via Fixed IP",
                    globalAccelerator: "AWS Global Accelerator",
                    globalAcceleratorDetail: "Provides 2 Fixed IPs",
                    albDiagram: "Application Load Balancer",
                    albDiagramDetail: "WAF attached for protection",
                    ec2Instances: "EC2 Instances",
                    ec2InstancesDetail: "Your Application"
                },
                summary: {
                    sectionTitle: "Key Takeaways",
                    point1: "AWS WAF protects web applications at <strong>Layer 7 (HTTP)</strong> against common web exploits.",
                    point2: "WAF can be deployed on <strong>ALB, API Gateway, CloudFront, AppSync, and Cognito</strong>, but <span class=\"font-bold text-red-600\">not</span> on Network Load Balancer.",
                    point3: "Web ACLs allow filtering based on various criteria: <strong>IP sets, HTTP headers/body, URI, size, geo-match, and rate-based rules</strong>.",
                    point4: "To get fixed IPs with WAF on an ALB, use <strong>AWS Global Accelerator</strong> in front of the ALB."
                }
            }
        };

        let currentLanguage = 'vi'; // Default language

        const langToggleVi = document.getElementById('lang-toggle-vi');
        const langToggleEn = document.getElementById('lang-toggle-en');

        function updateLanguageButtons() {
            if (currentLanguage === 'vi') {
                langToggleVi.classList.remove('bg-slate-200', 'text-slate-700');
                langToggleVi.classList.add('bg-sky-500', 'text-white');
                langToggleEn.classList.remove('bg-sky-500', 'text-white');
                langToggleEn.classList.add('bg-slate-200', 'text-slate-700');
            } else {
                langToggleEn.classList.remove('bg-slate-200', 'text-slate-700');
                langToggleEn.classList.add('bg-sky-500', 'text-white');
                langToggleVi.classList.remove('bg-sky-500', 'text-white');
                langToggleVi.classList.add('bg-slate-200', 'text-slate-700');
            }
        }

        function getNestedTranslation(obj, path) {
            return path.split('.').reduce((acc, part) => acc && acc[part], obj);
        }

        function updateContent() {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translatedText = getNestedTranslation(translations[currentLanguage], key);
                if (translatedText) {
                    element.innerHTML = translatedText; // Use innerHTML to preserve bold tags etc.
                }
            });
            updateLanguageButtons();
            updateChartLanguage();
        }

        let ruleChartInstance = null;

        function initializeRuleChart() {
            const ctx = document.getElementById('ruleChart').getContext('2d');
            const chartLabels = translations[currentLanguage].rules.chart.labels;

            ruleChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: 'S·ªë l∆∞·ª£ng (∆Ø·ªõc t√≠nh)', // This label is generic, not tied to specific data
                        data: [5, 4, 5, 3, 4, 2], // Illustrative data, remains constant
                        backgroundColor: [
                            'rgba(14, 165, 233, 0.6)', // sky-500
                            'rgba(6, 182, 212, 0.6)', // cyan-500
                            'rgba(34, 197, 94, 0.6)', // green-500
                            'rgba(251, 191, 36, 0.6)', // amber-400
                            'rgba(249, 115, 22, 0.6)', // orange-500
                            'rgba(148, 163, 184, 0.6)' // slate-400
                        ],
                        borderColor: [
                            'rgba(14, 165, 233, 1)',
                            'rgba(6, 182, 212, 1)',
                            'rgba(34, 197, 94, 1)',
                            'rgba(251, 191, 36, 1)',
                            'rgba(249, 115, 22, 1)',
                            'rgba(148, 163, 184, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bar chart
                    plugins: {
                        legend: {
                            display: false // No need for legend as there's only one dataset
                        },
                        title: {
                            display: true,
                            text: translations[currentLanguage].rules.chart.title,
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            color: '#1e293b' // slate-800
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x;
                                    }
                                    return label;
                                },
                                title: function(context) {
                                    const label = context[0].label;
                                    const maxChars = 16;
                                    if (label.length > maxChars) {
                                        let wrappedLabel = '';
                                        let currentLine = '';
                                        label.split(' ').forEach(word => {
                                            if ((currentLine + word).length > maxChars && currentLine.length > 0) {
                                                wrappedLabel += currentLine.trim() + '\n';
                                                currentLine = word + ' ';
                                            } else {
                                                currentLine += word + ' ';
                                            }
                                        });
                                        wrappedLabel += currentLine.trim();
                                        return wrappedLabel;
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                color: '#475569' // slate-600
                            },
                            grid: {
                                color: 'rgba(203, 213, 225, 0.3)' // slate-300 with transparency
                            }
                        },
                        y: {
                            ticks: {
                                color: '#475569', // slate-600
                                callback: function(value, index, ticks) {
                                    const label = this.getLabelForValue(value);
                                    const maxChars = 16; // Max characters per line before wrapping
                                    if (label.length > maxChars) {
                                        let wrappedLabel = '';
                                        let currentLine = '';
                                        label.split(' ').forEach(word => {
                                            if ((currentLine + word).length > maxChars && currentLine.length > 0) {
                                                wrappedLabel += currentLine.trim() + '\n';
                                                currentLine = word + ' ';
                                            } else {
                                                currentLine += word + ' ';
                                            }
                                        });
                                        wrappedLabel += currentLine.trim();
                                        return wrappedLabel;
                                    }
                                    return label;
                                }
                            },
                            grid: {
                                color: 'rgba(203, 213, 225, 0.3)' // slate-300 with transparency
                            }
                        }
                    }
                }
            });
        }

        function updateChartLanguage() {
            if (ruleChartInstance) {
                ruleChartInstance.options.plugins.title.text = translations[currentLanguage].rules.chart.title;
                ruleChartInstance.data.labels = translations[currentLanguage].rules.chart.labels;
                ruleChartInstance.update();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize content with default language
            updateContent();

            // Language toggle event listeners
            langToggleVi.addEventListener('click', () => {
                currentLanguage = 'vi';
                updateContent();
            });

            langToggleEn.addEventListener('click', () => {
                currentLanguage = 'en';
                updateContent();
            });

            // Tab functionality
            const tabsContainer = document.getElementById('rule-tabs');
            const contentContainer = document.getElementById('rule-content');
            
            if (tabsContainer) {
                const tabs = tabsContainer.querySelectorAll('.tab-button');
                const panes = contentContainer.querySelectorAll('.rule-pane');

                tabsContainer.addEventListener('click', function(event) {
                    const clickedTab = event.target.closest('.tab-button');
                    if (!clickedTab) return;

                    tabs.forEach(tab => tab.classList.remove('active'));
                    clickedTab.classList.add('active');

                    const targetId = clickedTab.dataset.target + '-content';

                    panes.forEach(pane => {
                        if (pane.id === targetId) {
                            pane.classList.remove('hidden');
                        } else {
                            pane.classList.add('hidden');
                        }
                    });
                });
            }

            // Initialize the chart after content is loaded
            initializeRuleChart();
        });
    </script>
</body>
</html>
